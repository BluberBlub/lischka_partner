---
import type { Location } from "../../types";
import { MapPin, Phone, Mail } from "lucide-react";

interface Props {
    location: Location;
}

const { location } = Astro.props;
---

<article
    class="bg-white rounded-xl p-6 md:p-8 shadow-sm hover:shadow-md transition-shadow border border-neutral-100"
>
    <div class="flex items-start gap-4">
        <div
            class="flex-shrink-0 w-12 h-12 bg-[--color-primary-50] rounded-lg flex items-center justify-center"
        >
            <MapPin className="w-6 h-6 text-[--color-primary-600]" />
        </div>
        <div class="flex-1">
            <h3
                class="text-xl font-serif font-bold text-[--color-primary-900] mb-3"
            >
                {location.name}
            </h3>

            <address class="not-italic text-neutral-600 space-y-1 mb-4">
                <p>{location.address.street}</p>
                <p>{location.address.postalCode} {location.address.city}</p>
            </address>

            <div class="space-y-2 mb-6">
                <a
                    href={`tel:+49${location.phone.replace(/^0/, "").replace(/[\s-]/g, "")}`}
                    class="flex items-center gap-2 text-neutral-700 hover:text-[--color-primary-900] transition-colors"
                >
                    <Phone className="w-4 h-4" />
                    <span>Tel: {location.phone}</span>
                </a>
                <a
                    href={`tel:+49${location.fax.replace(/^0/, "").replace(/[\s-]/g, "")}`}
                    class="flex items-center gap-2 text-neutral-500 text-sm hover:text-[--color-primary-900] transition-colors"
                >
                    <span class="w-4"></span>
                    <span>Fax: {location.fax}</span>
                </a>
                <a
                    href={`mailto:${location.email}`}
                    class="flex items-center gap-2 text-neutral-700 hover:text-[--color-primary-900] transition-colors"
                >
                    <Mail className="w-4 h-4" />
                    <span>{location.email}</span>
                </a>
            </div>

            {
                location.mapEmbedUrl && (
                    <div class="w-full h-48 bg-neutral-100 rounded-lg overflow-hidden border border-neutral-200">
                        <iframe
                            width="100%"
                            height="100%"
                            src={location.mapEmbedUrl}
                            style="border:0;"
                            allowfullscreen=""
                            loading="lazy"
                            referrerpolicy="no-referrer-when-downgrade"
                        />
                    </div>
                )
            }
        </div>
    </div>
</article>
