---
interface Props {
    title: string;
    subtitle?: string;
    centered?: boolean;
    backgroundImage?: string | ImageMetadata;
    breadcrumbs?: { label: string; href: string }[];
}

const {
    title,
    subtitle,
    centered = false,
    backgroundImage,
    breadcrumbs,
} = Astro.props;
import { Image } from "astro:assets";
import type { ImageMetadata } from "astro";

const breadcrumbSchema = breadcrumbs
    ? {
          "@context": "https://schema.org",
          "@type": "BreadcrumbList",
          itemListElement: [
              {
                  "@type": "ListItem",
                  position: 1,
                  name: "Home",
                  item: "https://www.lischka-partner.de/",
              },
              ...breadcrumbs.map((crumb, index) => ({
                  "@type": "ListItem",
                  position: index + 2,
                  name: crumb.label,
                  item: `https://www.lischka-partner.de${crumb.href}`,
              })),
          ],
      }
    : null;
---

{
    breadcrumbSchema && (
        <script
            type="application/ld+json"
            set:html={JSON.stringify(breadcrumbSchema)}
        />
    )
}

{
    backgroundImage ? (
        <div class="relative w-full h-[300px] md:h-[400px] overflow-hidden mb-12">
            <Image
                src={backgroundImage as any}
                alt={title}
                width={1920}
                height={1080}
                class="w-full h-full object-cover"
                loading="eager"
            />
            <div class="absolute inset-0 bg-black/50" />
            <div class="absolute inset-0 flex flex-col items-center justify-end pb-8 md:pb-12 text-center container mx-auto px-4">
                {breadcrumbs && (
                    <nav class="relative z-10 mb-4 text-sm text-white/80">
                        <ul class="flex items-center justify-center gap-2">
                            <li>
                                <a
                                    href="/"
                                    class="hover:text-white transition-colors"
                                >
                                    Home
                                </a>
                            </li>
                            {breadcrumbs.map((crumb) => (
                                <>
                                    <li class="select-none">/</li>
                                    <li>
                                        <a
                                            href={crumb.href}
                                            class="hover:text-white transition-colors text-white font-medium"
                                        >
                                            {crumb.label}
                                        </a>
                                    </li>
                                </>
                            ))}
                        </ul>
                    </nav>
                )}
                <h1
                    class="text-3xl md:text-4xl lg:text-5xl font-serif font-bold mb-4 relative z-10"
                    style="color: #ffffff;"
                >
                    {title}
                </h1>
                {subtitle && (
                    <p class="text-lg md:text-xl text-white/90 max-w-3xl relative z-10">
                        {subtitle}
                    </p>
                )}
            </div>
        </div>
    ) : (
        <header class:list={["mb-8 md:mb-12", centered && "text-center"]}>
            <h1 class="text-3xl md:text-4xl lg:text-5xl font-serif font-bold text-[--color-primary-900] mb-4">
                {title}
            </h1>
            {subtitle && (
                <p
                    class:list={[
                        "text-lg md:text-xl text-neutral-600 max-w-3xl",
                        centered && "mx-auto",
                    ]}
                >
                    {subtitle}
                </p>
            )}
        </header>
    )
}
