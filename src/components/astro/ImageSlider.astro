---
/**
 * ImageSlider component - displays a hero image slider
 */
import { images } from "../../data/images";

interface Props {
    autoplay?: boolean;
    interval?: number;
}

const { autoplay = true, interval = 4000 } = Astro.props;

const sliderImages = [
    { src: images.slider.image1, alt: "Kanzlei Lischka & Partner" },
    { src: images.slider.image2, alt: "BÃ¼ro Lischka & Partner" },
];
---

<div class="relative w-full h-[400px] md:h-[500px] lg:h-[600px] overflow-hidden">
    <!-- Images -->
    {sliderImages.map((image, index) => (
        <div
            class={`slider-image absolute inset-0 transition-opacity duration-1000 ${index === 0 ? 'opacity-100' : 'opacity-0'}`}
            data-index={index}
        >
            <img
                src={image.src}
                alt={image.alt}
                class="w-full h-full object-cover"
                loading={index === 0 ? "eager" : "lazy"}
            />
            <!-- Overlay for better text readability if needed -->
            <div class="absolute inset-0 bg-gradient-to-t from-black/30 to-transparent"></div>
        </div>
    ))}
    
    <!-- Navigation dots -->
    <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2 z-10">
        {sliderImages.map((_, index) => (
            <button
                class={`slider-dot w-3 h-3 rounded-full transition-all ${index === 0 ? 'bg-white' : 'bg-white/50'}`}
                data-index={index}
                aria-label={`Slide ${index + 1}`}
            />
        ))}
    </div>
</div>

<script define:vars={{ autoplay, interval }}>
    document.addEventListener('DOMContentLoaded', () => {
        const images = document.querySelectorAll('.slider-image');
        const dots = document.querySelectorAll('.slider-dot');
        let currentIndex = 0;
        
        function showSlide(index) {
            images.forEach((img, i) => {
                img.classList.toggle('opacity-100', i === index);
                img.classList.toggle('opacity-0', i !== index);
            });
            dots.forEach((dot, i) => {
                dot.classList.toggle('bg-white', i === index);
                dot.classList.toggle('bg-white/50', i !== index);
            });
            currentIndex = index;
        }
        
        // Click handlers for dots
        dots.forEach((dot, index) => {
            dot.addEventListener('click', () => showSlide(index));
        });
        
        // Auto-advance if autoplay is enabled
        if (autoplay) {
            setInterval(() => {
                const nextIndex = (currentIndex + 1) % images.length;
                showSlide(nextIndex);
            }, interval);
        }
    });
</script>
